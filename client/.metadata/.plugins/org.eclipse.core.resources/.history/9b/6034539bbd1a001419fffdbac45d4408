package com.ui
{
    import flash.display.*;
    import flash.events.*;
    import hsuan.*;

    public class UsrPreference extends Sprite
    {
        public var closeApi:Function;
        private var _panel:Sprite;
        private const _BORDER_COLOR:uint = 13361904;
        private var _setReK:SetReKUi;
        private var _setMa:SetMAUi;
        private const _PANEL_TOP_H:uint = 70;
        private var _cfg:Config;
        private var _setFloater:SetFloaterUi;
        private var _h:uint = 345;
        private var _w:uint = 430;

        public function UsrPreference(param1:Function)
        {
            this._cfg = Config.getInstance();
            this.closeApi = param1;
            this.setBg();
            this.setTab();
            this._panel = new Sprite();
            this._panel.x = 67;
            this._panel.y = this._PANEL_TOP_H + 50;
            addChild(this._panel);
            this._setMa = new SetMAUi();
            this._setMa.closeApi = param1;
            this.initTabUi(this._setMa, true);
            this._setFloater = new SetFloaterUi();
            this.initTabUi(this._setFloater);
            this._setReK = new SetReKUi();
            this.initTabUi(this._setReK);
            return;
        }// end function

        private function setBg() : void
        {
            var _loc_1:* = new PopoutPanel(this.closeApi);
            addChild(_loc_1);
            return;
        }// end function

        private function setFloater(event:MouseEvent) : void
        {
            this.hideAll();
            this._setFloater.visible = true;
            return;
        }// end function

        private function setTab() : void
        {
            var _loc_1:Array = [];
            var _loc_2:Object = {};
            _loc_2.txt = "均线参数";
            _loc_2.func = this.setMA;
            _loc_1.push(_loc_2);
            _loc_2 = {};
            _loc_2.txt = "K线浮层";
            _loc_2.func = this.setFloater;
            _loc_1.push(_loc_2);
            _loc_2 = {};
            _loc_2.txt = "默认复权";
            _loc_2.func = this.setReK;
            _loc_1.push(_loc_2);
            var _loc_3:* = new TabModule(_loc_1);
            _loc_3.y = this._PANEL_TOP_H - _loc_3.BTN_H + 1;
            addChild(_loc_3);
            return;
        }// end function

        private function initTabUi(param1:SetUiBase, param2:Boolean = false) : void
        {
            param1.visible = param2;
            this._panel.addChild(param1);
            return;
        }// end function

        public function get h() : uint
        {
            return this._h;
        }// end function

        private function setMA(event:MouseEvent) : void
        {
            this.hideAll();
            this._setMa.visible = true;
            return;
        }// end function

        public function get w() : uint
        {
            return this._w;
        }// end function

        private function setReK(event:MouseEvent) : void
        {
            this.hideAll();
            this._setReK.visible = true;
            return;
        }// end function

        private function hideAll() : void
        {
            var _loc_1:uint = 0;
            while (_loc_1 < this._panel.numChildren)
            {
                
                this._panel.getChildAt(_loc_1).visible = false;
                _loc_1 = _loc_1 + 1;
            }
            return;
        }// end function

    }
}
